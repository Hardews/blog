---
slug: website-set
title: ç‰›è‚‰æ‹Œé¢çš„å»ºç«™æ€»ç»“
authors: [hardews]
tags: [2023, å»ºç«™]
---

# ç‰›è‚‰æ‹Œé¢çš„å»ºç«™æ€»ç»“

## æ„æˆ

ä½¿ç”¨äº† `docusaurus`ï¼ˆFacebook å¼€æºï¼Œè€æ˜¯æ‹¼ä¸å‡ºæ¥è¿™ä¸ªå•è¯ã€‚ï¼‰+ `caddy`

`dacusaurus` æä¾›äº† `rss.xml` æ–‡ä»¶ï¼ˆä¸ºä»€ä¹ˆéœ€è¦ rssï¼Œå› ä¸ºå¯ä»¥æ”¾åœ¨ github çš„ profile ä¸Š~~è£…é€¼~~ï¼‰ï¼Œä½†æ˜¯éœ€è¦ `npm run build` åæ‰ä¼šç”Ÿæˆã€‚äºæ˜¯åˆ©ç”¨äº† github çš„ webhookï¼Œåœ¨åšå®¢æ›´æ–°æ—¶ï¼Œå‘é€è¯·æ±‚è‡³æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨æ‰§è¡Œè„šæœ¬ä»¥å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚

<!--truncate-->

## å…³äº Docusaurus

ğŸ“•å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š[Docusaurus ä»‹ç» | Docusaurus](https://docusaurus.io/zh-CN/docs/)

å®‰è£…å•¥çš„ä¸å†èµ˜è¿°ã€‚

### é…ç½®

1. æˆ‘çš„ç½‘ç«™æ˜¯ä»…åšå®¢ï¼Œæ‰€ä»¥å»æ‰äº† docs çš„é¡µé¢ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­å»æ‰è¿™ä¸€é¡¹ï¼Œä½†æ˜¯ docs è¿™ä¸ªæ–‡ä»¶å¤¹ä¸èƒ½åˆ ï¼ˆå…¶å®ä¹Ÿå¯ä»¥åˆ ï¼Œä½†æ˜¯æˆ‘å¿˜äº†åˆ äº†ä¹‹åè¿˜è¦å¼„å•¥äº†ï¼‰ï¼Œåœ¨é‡Œé¢éšä¾¿åˆ›ä¸ªç©º md å°±è¡Œã€‚

2. å› ä¸ºæ˜¯ä»…åšå®¢ï¼Œéœ€è¦åˆ æ‰ `src` ä¸­çš„ `index.js`ï¼Œé˜²æ­¢åŠ è½½å†²çªã€‚

3. æ·»åŠ ç™¾åº¦ç»Ÿè®¡çš„ä»£ç ï¼ˆæ’ä»¶ä¹Ÿå¯ä»¥ï¼‰ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»£ç 

   ```js
   scripts: [
   	  {
   		  src: 'https://hm.baidu.com/hm.js?xxx',
   		  async: true
   	  }
   
     ],
   ```

4. åšå®¢çš„å±æ€§é…ç½®å¦‚ä¸‹ï¼š

   ```js
   blog: {
             path: "./blog",
             showReadingTime: true, // æ˜¯å¦å±•ç¤ºéœ€è¦é˜…è¯»çš„æ—¶é—´
             blogSidebarTitle: "æœ€è¿‘çš„æ–‡ç« ", // ä¾§è¾¹æ çš„åå­—
             routeBasePath:"/", // ä»…åšå®¢æ¨¡å¼è¦æ”¹æˆæ–œæ 
   	      sortPosts: "descending", // å‡åºæ’åº
             postsPerPage: 7, // ä¸€é¡µå‡ ç¯‡æ–‡ç« 
             archiveBasePath: "/archive" // å½’æ¡£é¡µçš„è·¯å¾„
           },
   ```

   

### å‘ç‚¹

åœ¨ `npm start` åè¿è¡Œåœ¨ `localhost:3000`ï¼Œä½†æ˜¯ä½†æ˜¯ï¼Œä½ è®¿é—® `127.0.0.1:3000` æ˜¯ä¸è¡Œçš„ã€‚æˆ‘ä¹Ÿä¸æ™“å¾—ä¸ºå•¥ã€‚



## å…³äº Caddy

[Getting Started â€” Caddy Documentation (caddyserver.com)](https://caddyserver.com/docs/getting-started)

ä½¿ç”¨çš„æ˜¯ Caddy2ï¼Œå®‰è£…å¯åŠ¨åŒæ ·ä¸èµ˜è¿°ã€‚

### é…ç½®

ä½¿ç”¨ Caddyfileï¼Œå†…å®¹å°±ä¸€å¥ï¼Œå°† `localhost:3000` è¿è¡Œçš„é¡¹ç›®åå‘ä»£ç†åˆ° `hardews.cn`

```config
hardews.cn {
	reverse_proxy localhost:3000
}
```



æ— å¤ªå¤§å‘ç‚¹ã€‚



## å…³äº webhook

è‡ªå·±æ“äº†ä¸€ä¸ªå°è½®å­ï¼Œ[Hardews/webhook: å¤„ç† github webhook å‘é€çš„ç½‘ç»œè¯·æ±‚ï¼Œç„¶åæ‰§è¡Œç›¸å…³è„šæœ¬ã€‚](https://github.com/Hardews/webhook)

ç¯å¢ƒå˜é‡æ­£å¸¸è®¾ç½®ã€‚

æ‰§è¡Œçš„ shell è„šæœ¬å¦‚ä¸‹

```shell
# æœåŠ¡åï¼Œä¹Ÿæ˜¯ docker é•œåƒ / å®¹å™¨åå­—
SERVER_NAME='blog'
# æ„å»ºçš„è·¯å¾„ï¼šç¯å¢ƒå˜é‡åŸºç¡€è·¯å¾„ + æœåŠ¡å
SOURCE_PATH= '/opt/' + $SERVER_NAME
# å®¹å™¨ id
CID=$(docker ps | grep "$SERVER_NAME" | awk '{print $1}')
# é•œåƒ id
IID=$(docker images | grep "$SERVER_NAME" | awk '{print $3}')
# å¦‚æœæœ‰è¯¥å®¹å™¨
if [ -n "$CID" ]; then
  echo "å­˜åœ¨å®¹å™¨ $SERVER_NAME, CID-$CID"
  docker stop $SERVER_NAME
  docker rm $SERVER_NAME
fi
# æ„å»º docker é•œåƒ
docker build -t $SERVER_NAME .
cd
# è¿è¡Œ docker å®¹å™¨
docker run --name $SERVER_NAME -d -p 3000:80 $SERVER_NAME
echo "$SERVER_NAME è¿è¡ŒæˆåŠŸ"
```



Dockerfile å¦‚ä¸‹

```dockerfile
FROM node:lts as base

ENV NPM_CONFIG_LOGLEVEL=warn
ENV NPM_CONFIG_COLOR=false

WORKDIR /home/node/app
COPY . /home/node/app/

FROM base as development
WORKDIR /home/node/app
RUN npm install
USER node
EXPOSE 3000
CMD ["npm", "start"]

FROM base as production
WORKDIR /home/node/app
COPY --from=development /home/node/app/node_modules /home/node/app/node_modules
RUN npm run build

FROM nginx:stable-alpine as deploy
WORKDIR /home/node/app
COPY --from=production /home/node/app/build /usr/share/nginx/html/
```

